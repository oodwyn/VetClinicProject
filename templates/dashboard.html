{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
    <h2>üë§ –ö–∞–±–∏–Ω–µ—Ç: {{ client[1] }}</h2>
    <a href="/" class="btn btn-sm btn-outline-danger">–í—ã—Ö–æ–¥</a>
</div>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card bg-light h-100">
            <div class="card-body">
                <h5 class="card-title">–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</h5>
                <p class="card-text">–¢–µ–ª–µ—Ñ–æ–Ω: <strong>{{ client[2] }}</strong></p>
                <hr>
                <a href="/book/{{ client[0] }}" class="btn btn-primary w-100">üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –≤—Ä–∞—á—É</a>
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <div class="card h-100">
            <div class="card-header d-flex justify-content-between align-items-center bg-white">
                <span class="fw-bold">üêæ –ú–æ–∏ –ø–∏—Ç–æ–º—Ü—ã</span>
                <a href="/add_pet/{{ client[0] }}" class="btn btn-sm btn-success">+ –î–æ–±–∞–≤–∏—Ç—å</a>
            </div>
            <ul class="list-group list-group-flush">
                {% for pet in pets %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <strong>{{ pet[1] }}</strong> <span class="text-muted">({{ pet[2] }})</span>
                        </div>
                        <a href="/delete_pet/{{ pet[0] }}/{{ client[0] }}"
                           class="btn btn-sm btn-outline-danger"
                           onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –ø–∏—Ç–æ–º—Ü–∞ {{ pet[1] }}?')">
                           üóëÔ∏è
                        </a>
                    </li>
                {% else %}
                    <li class="list-group-item text-muted text-center">–ü–∏—Ç–æ–º—Ü–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ!</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<h3 class="mt-5">üìã –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–µ–º–æ–≤</h3>
<div class="table-responsive">
    <table class="table table-hover mt-3 align-middle">
        <thead class="table-dark">
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–ü–∏—Ç–æ–º–µ—Ü</th>
                <th>–í—Ä–∞—á</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–∏–∞–≥–Ω–æ–∑ / –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for appt in history %}
            <tr>
                <td>{{ appt[0] }}</td>
                <td><strong>{{ appt[3] }}</strong></td>
                <td>{{ appt[1] }} <br><small class="text-muted">{{ appt[2] }}</small></td>
                <td>
                    {% if appt[4] == '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω' %}
                        <span class="badge bg-warning text-dark">{{ appt[4] }}</span>
                    {% else %}
                        <span class="badge bg-success">{{ appt[4] }}</span>
                    {% endif %}
                </td>
                <td>
                    {% if appt[5] %}
                        <strong>{{ appt[5] }}</strong><br>
                        <span class="text-muted small">{{ appt[6] }}</span>
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center py-3">–ó–∞–ø–∏—Å–µ–π –Ω–µ—Ç. –ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–∏–µ–º!</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}